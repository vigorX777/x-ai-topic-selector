<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1100">
  <!-- Define styles -->
  <defs>
    <style>
      .title { font: bold 24px sans-serif; fill: #1a1a1a; }
      .subtitle { font: bold 16px sans-serif; fill: #4a4a4a; }
      .label { font: 14px sans-serif; fill: #2a2a2a; }
      .small { font: 12px sans-serif; fill: #5a5a5a; }
      .box { fill: #f8f9fa; stroke: #2c3e50; stroke-width: 2; rx: 8; }
      .box-entry { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; rx: 8; }
      .box-source { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; rx: 8; }
      .box-scan { fill: #e8f5e9; stroke: #388e3c; stroke-width: 2; rx: 8; }
      .box-bookmark { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; rx: 8; }
      .box-ai { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; rx: 8; }
      .box-report { fill: #e0f2f1; stroke: #00796b; stroke-width: 2; rx: 8; }
      .arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-scan { stroke: #388e3c; stroke-width: 2; fill: none; marker-end: url(#arrowhead-scan); }
      .arrow-bookmark { stroke: #c2185b; stroke-width: 2; fill: none; marker-end: url(#arrowhead-bookmark); }
      .decision { fill: #fff9c4; stroke: #f57f17; stroke-width: 2; }
      .tag { font: bold 11px sans-serif; fill: white; }
      .tag-rect-scan { fill: #388e3c; rx: 4; }
      .tag-rect-bookmark { fill: #c2185b; rx: 4; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e" />
    </marker>
    <marker id="arrowhead-scan" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#388e3c" />
    </marker>
    <marker id="arrowhead-bookmark" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#c2185b" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" class="title">X AI Topic Selector - 双模式架构</text>
  <text x="700" y="65" text-anchor="middle" class="subtitle">Dual-Mode Architecture: Scan &amp; Filter vs. Bookmark Extract</text>

  <!-- Entry Point -->
  <rect x="600" y="90" width="200" height="60" class="box-entry"/>
  <text x="700" y="115" text-anchor="middle" class="label">入口点 (Entry)</text>
  <text x="700" y="135" text-anchor="middle" class="small">/select-topics</text>

  <!-- Source Selection Decision -->
  <path d="M 700 150 L 700 180" class="arrow"/>
  <polygon points="650,200 750,200 800,250 750,300 650,300 600,250" class="decision"/>
  <text x="700" y="240" text-anchor="middle" class="label">选择内容来源</text>
  <text x="700" y="260" text-anchor="middle" class="small">(Source Type)</text>
  <text x="700" y="280" text-anchor="middle" class="small">Lists / Home / Bookmarks</text>

  <!-- Branch Split -->
  <path d="M 600 250 L 300 250 L 300 340" class="arrow-scan"/>
  <path d="M 800 250 L 1100 250 L 1100 340" class="arrow-bookmark"/>

  <!-- LEFT BRANCH: SCAN MODE -->
  <rect x="40" y="320" width="240" height="40" class="tag-rect-scan"/>
  <text x="160" y="345" text-anchor="middle" class="tag">扫描过滤模式 (SCAN &amp; FILTER)</text>

  <!-- Scan: Chrome Scraping -->
  <rect x="150" y="375" width="300" height="80" class="box-scan"/>
  <text x="300" y="400" text-anchor="middle" class="label">Chrome CDP 抓取</text>
  <text x="300" y="420" text-anchor="middle" class="small">• 滚动页面加载推文</text>
  <text x="300" y="436" text-anchor="middle" class="small">• Thread 并行展开 (3 并发)</text>
  <text x="300" y="452" text-anchor="middle" class="small">• 长文本自动展开</text>

  <!-- Scan: Scoring -->
  <path d="M 300 455 L 300 485" class="arrow-scan"/>
  <rect x="150" y="485" width="300" height="100" class="box-scan"/>
  <text x="300" y="510" text-anchor="middle" class="label">评分处理</text>
  <text x="300" y="530" text-anchor="middle" class="small">数据模式: 点赞×1 + 转发×3 + 评论×2</text>
  <text x="300" y="550" text-anchor="middle" class="small">AI 模式: Gemini API 三维评分</text>
  <text x="300" y="570" text-anchor="middle" class="small">(创新性 + 实用性 + 影响力)</text>

  <!-- Scan: Filtering -->
  <path d="M 300 585 L 300 615" class="arrow-scan"/>
  <rect x="150" y="615" width="300" height="100" class="box-scan"/>
  <text x="300" y="640" text-anchor="middle" class="label">过滤与排名</text>
  <text x="300" y="660" text-anchor="middle" class="small">• 关键词过滤 (keywords/exclude)</text>
  <text x="300" y="680" text-anchor="middle" class="small">• 分类过滤 (6 种类别)</text>
  <text x="300" y="700" text-anchor="middle" class="small">• Top N 截断 (5/10/20)</text>

  <!-- RIGHT BRANCH: BOOKMARK MODE -->
  <rect x="980" y="320" width="240" height="40" class="tag-rect-bookmark"/>
  <text x="1100" y="345" text-anchor="middle" class="tag">书签提取模式 (BOOKMARK EXTRACT)</text>

  <!-- Bookmark: Chrome Scraping -->
  <rect x="950" y="375" width="300" height="80" class="box-bookmark"/>
  <text x="1100" y="400" text-anchor="middle" class="label">Chrome CDP 抓取</text>
  <text x="1100" y="420" text-anchor="middle" class="small">• 滚动书签页加载内容</text>
  <text x="1100" y="436" text-anchor="middle" class="small">• Thread 并行展开 (3 并发)</text>
  <text x="1100" y="452" text-anchor="middle" class="small">• 长文本自动展开</text>

  <!-- Bookmark: AI Analysis ONLY -->
  <path d="M 1100 455 L 1100 485" class="arrow-bookmark"/>
  <rect x="950" y="485" width="300" height="100" class="box-bookmark"/>
  <text x="1100" y="510" text-anchor="middle" class="label">AI 深度分析 (强制)</text>
  <text x="1100" y="530" text-anchor="middle" class="small">Gemini API 批量分析 (5 条/批)</text>
  <text x="1100" y="550" text-anchor="middle" class="small">• 三维评分 (创新性/实用性/影响力)</text>
  <text x="1100" y="570" text-anchor="middle" class="small">• 摘要 + 翻译 + 分类 + 标题</text>

  <!-- Bookmark: NO Filtering -->
  <path d="M 1100 585 L 1100 615" class="arrow-bookmark"/>
  <rect x="950" y="615" width="300" height="100" class="box-bookmark"/>
  <text x="1100" y="640" text-anchor="middle" class="label">保留全部内容</text>
  <text x="1100" y="660" text-anchor="middle" class="small">✗ 无关键词过滤</text>
  <text x="1100" y="680" text-anchor="middle" class="small">✗ 无分类过滤</text>
  <text x="1100" y="700" text-anchor="middle" class="small">✗ 无 Top N 截断</text>

  <!-- Merge to Report Generation -->
  <path d="M 300 715 L 300 770 L 600 770" class="arrow-scan"/>
  <path d="M 1100 715 L 1100 770 L 800 770" class="arrow-bookmark"/>
  
  <!-- Report Generation -->
  <rect x="600" y="790" width="200" height="80" class="box-report"/>
  <text x="700" y="815" text-anchor="middle" class="label">生成报告</text>
  <text x="700" y="835" text-anchor="middle" class="small">Markdown 格式</text>
  <text x="700" y="855" text-anchor="middle" class="small">互动热度 + 关键词统计</text>

  <!-- Output -->
  <path d="M 700 870 L 700 900" class="arrow"/>
  <rect x="575" y="900" width="250" height="60" class="box-entry"/>
  <text x="700" y="925" text-anchor="middle" class="label">输出结果</text>
  <text x="700" y="945" text-anchor="middle" class="small">./output/topic-report-{timestamp}.md</text>

  <!-- Legend -->
  <text x="50" y="1000" class="subtitle">图例 (Legend)</text>
  <rect x="50" y="1010" width="120" height="30" class="box-scan"/>
  <text x="110" y="1030" text-anchor="middle" class="small">扫描过滤模式</text>
  <rect x="180" y="1010" width="120" height="30" class="box-bookmark"/>
  <text x="240" y="1030" text-anchor="middle" class="small">书签提取模式</text>
  <rect x="310" y="1010" width="100" height="30" class="box-ai"/>
  <text x="360" y="1030" text-anchor="middle" class="small">AI 分析</text>

  <!-- Key Differences -->
  <text x="50" y="1070" class="subtitle">核心差异</text>
  <text x="50" y="1090" class="small">• 扫描模式: 关键词过滤 + 分类筛选 + Top N 截断 = 精选推荐</text>
  <text x="550" y="1090" class="small">• 书签模式: 保留全部 + AI 辅助理解 = 完整内容日报</text>

</svg>